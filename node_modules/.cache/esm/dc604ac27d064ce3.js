let DEBUG_MODE,ValidationError,CustomErrorHandler;_7d0‍.x([["default",()=>_7d0‍.o]]);_7d0‍.w("../config",[["DEBUG_MODE",["DEBUG_MODE"],function(v){DEBUG_MODE=v}]]);_7d0‍.w("Joi",[["ValidationError",["ValidationError"],function(v){ValidationError=v}]]);_7d0‍.w("../services/CustomErrorHandler",[["default",["CustomErrorHandler"],function(v){CustomErrorHandler=v}]]);


const errorHandler = (err , req , res , next)=>{
  let statusCode = 500;
  let data ={
      message : "internal servers fault",
      ...(DEBUG_MODE ==='true'&& {originalError : err.message
      })
    }
      if(err instanceof ValidationError)
      {
          statusCode = 422;
          data = {
              message : err.message
          }

      }

      if(err instanceof CustomErrorHandler)
      {
        statusCode = err.status
        data = {
          message : err.message
        }
      }
      return res.status(statusCode).json(data)
}


_7d0‍.d(errorHandler);